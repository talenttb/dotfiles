# ============================================
# 基本設定
# ============================================

# 開啟 256 色彩支援（使用最新的 tmux-256color）
set -g default-terminal "tmux-256color"

# 縮短 ESC 延遲時間（對 Vim 用戶很重要）
set -sg escape-time 10

# 增加歷史記錄行數
set -g history-limit 10000

# 視窗和窗格編號從 1 開始
set -g base-index 1
setw -g pane-base-index 1

# 關閉視窗後自動重新編號
set -g renumber-windows on

# 開啟滑鼠支援
set -g mouse on

# 活動監控
setw -g monitor-activity on
set -g visual-activity off

# 關閉 pane 時不需確認 (先解除再綁定)
unbind-key x
bind-key x kill-pane

# ============================================
# 快捷鍵綁定
# ============================================

# 重載設定檔
bind r source-file ~/.tmux.conf \; display "設定檔已重載！"

# 更直覺的分割窗格快捷鍵
bind | split-window -h -c "#{pane_current_path}"
bind - split-window -v -c "#{pane_current_path}"
unbind '"'
unbind %

# Vim 風格的窗格切換
bind h select-pane -L
bind j select-pane -D
bind k select-pane -U
bind l select-pane -R

# Vim 風格的窗格大小調整（使用 Prefix + H/J/K/L）
bind -r H resize-pane -L 5
bind -r J resize-pane -D 5
bind -r K resize-pane -U 5
bind -r L resize-pane -R 5

# ============================================
# 複製模式設定（Vim 風格）
# ============================================

# 使用 vi 模式
setw -g mode-keys vi

# 複製模式按鍵綁定
bind -T copy-mode-vi v send-keys -X begin-selection
bind -T copy-mode-vi y send-keys -X copy-selection-and-cancel
bind -T copy-mode-vi r send-keys -X rectangle-toggle

# 滑鼠選擇時自動複製
bind -T copy-mode-vi MouseDragEnd1Pane send-keys -X copy-selection-and-cancel

# ============================================
# 視覺樣式設定（簡約灰階）
# ============================================

# 狀態列樣式
set -g status-style bg=colour250,fg=colour235
set -g status-left-length 20
set -g status-right-length 50

# 狀態列左側：顯示 session 名稱
set -g status-left "#[bg=colour245,fg=colour255,bold] #S #[default] "

# 狀態列右側：顯示日期時間
set -g status-right "#[fg=colour235] %Y-%m-%d %H:%M "

# 視窗狀態樣式
setw -g window-status-style fg=colour240,bg=colour250
setw -g window-status-current-style fg=colour235,bg=colour255,bold
setw -g window-status-activity-style fg=colour235,bg=colour248

# 視窗狀態格式
setw -g window-status-format " #I:#W "
setw -g window-status-current-format " #I:#W "

# 窗格邊框樣式
set -g pane-border-style fg=colour245
set -g pane-active-border-style fg=colour240

# 訊息樣式
set -g message-style bg=colour255,fg=colour235,bold

# ============================================
# 其他優化
# ============================================

# 讓 tmux 自動設定視窗標題
setw -g automatic-rename on
set -g set-titles on
